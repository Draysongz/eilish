mt5:
  path_env: MT5_PATH
  login_env: MT5_LOGIN
  password_env: MT5_PASSWORD
  server_env: MT5_SERVER

trade:
  symbols: ["XAUUSD"]
  timeframe: M5
  max_positions: 1
  magic: 20250212
  dry_run: false
  polling_seconds: 10
  per_symbol:
    XAUUSD:
      lot: 0.01
      max_spread_pips: 50
      sl_pips: 150
      tp_pips: 150
      sl_mode: atr
      atr_sl_multiplier: 1.5
      rr_ratio: 1.8
      max_sl_cap_points: 400  # Maximum SL in points (XAUUSD: 400 = 40 pips)
    GBPUSD:
      lot: 0.02
      max_spread_pips: 5
      sl_pips: 5
      tp_pips: 5
      sl_mode: atr
      atr_sl_multiplier: 1.2
      rr_ratio: 1.5

# strategy:
#   ema_fast: 12
#   ema_slow: 36
#   min_bars: 200
#   allow_short: true
#   # RSI filter settings
#   use_rsi: true
#   rsi_period: 14
#   rsi_overbought: 68.0
#   rsi_oversold: 32.0
#   # ATR volatility filter settings
#   use_atr: true
#   atr_period: 14
#   atr_min_threshold: 0.2  # Minimum ATR to consider trading

strategy:
  ema_fast: 6
  ema_slow: 16
  min_bars: 80
  allow_short: true
  entry_delay_bars: 1
  # RSI filter settings
  use_rsi: true
  rsi_period: 14
  rsi_overbought: 68.0
  rsi_oversold: 32.0
  # ATR volatility filter settings
  use_atr: true
  atr_period: 14
  atr_min_threshold: 0.2  # Minimum ATR to consider trading
  atr_min_thresholds:
    XAUUSD: 0.2
    GBPUSD: 0.00002
  # Entry refinement filters (reduce late entries)
  use_expansion_candle_filter: false
  expansion_lookback: 10
  expansion_multiplier: 1.5
  use_distance_from_ema_filter: false
  distance_from_ema_multiplier: 1.2
  use_atr_spike_filter: false
  atr_spike_lookback: 20
  atr_spike_multiplier: 1.5
  use_break_structure_filter: false
  break_structure_lookback: 5

profit_take:
  enabled: true
  trigger_usd: 6
  risk_threshold: 0.5
  # Profit cap removed - let trades run to TP/SL
  take_profit_usd_per_symbol:
    XAUUSD: 5
  check_interval_seconds: 1

breakeven:
  enabled: true
  activation_ratio: 0.8  # Move SL to BE when profit reaches 80% of initial risk

ai:
  enabled: false
  model_path: models/ai_filter.json
  train_data_path: data/trades.csv
  probability_threshold: 0.45

shadow_testing:
  enabled: true
  log_trades: true
